<!doctype html><html><head><title>finalize的意义 // 超的博客</title><meta charset=utf-8><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta property="og:title" content="finalize的意义"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:locale" content="zh"><meta property="og:url" content="https://dccmmtop.github.io/posts/finalize%E7%9A%84%E6%84%8F%E4%B9%89/"><link rel=icon type=image/x-icon href=../../favicon.ico><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css integrity=sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js integrity=sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1 crossorigin=anonymous></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js integrity=sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM crossorigin=anonymous></script>
<link href=https://dccmmtop.github.io/webfonts/ptserif/main.css rel=stylesheet type=text/css><link href=https://dccmmtop.github.io/webfonts/source-code-pro/main.css rel=stylesheet type=text/css><link rel=stylesheet href=https://dccmmtop.github.io/css/style.css><link rel=stylesheet href=https://dccmmtop.github.io/css/custom.css><link rel=stylesheet href=https://dccmmtop.github.io/css/copy-to-clipboard.css><script src=https://dccmmtop.github.io/js/fastsearch.js></script>
<script src=https://dccmmtop.github.io/js/fuse.js></script>
<script src=https://dccmmtop.github.io/js/custom.js></script>
<script src=https://dccmmtop.github.io/js/copy-to-clipboard.js></script><meta name=generator content="Hugo 0.101.0"></head><body><div id=container><header id=header><div id=header-outer class=outer><div id=header-inner class=inner><a id=main-nav-toggle class=nav-icon href=javascript:;></a>
<a id=logo class=logo-text href=https://dccmmtop.github.io/>超的博客</a><nav id=main-nav><a class=main-nav-link href=../../posts/>文章</a>
<a class=main-nav-link href=../../tags/>标签</a>
<a class=main-nav-link href=../../about/>关于</a>
<a class=main-nav-link id=search><input id=inputSearch placeholder=search><svg t="1634282825021" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="2401" width="15" height="15"><path d="M1005.312 914.752 806.784 716.288A448 448 0 100 448a448 448 0 00716.288 358.784l198.4 198.4a64 64 0 1090.624-90.432zM448 767.936A320 320 0 11448 128a320 320 0 010 640z" fill="#262626" p-id="2402"/></svg></a></nav><nav id=sub-nav><div id=search-form-wrap></div></nav></div></div><div class="modal fade" id=exampleModal tabindex=-1 role=dialog aria-labelledby=exampleModalLabel aria-hidden=true><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><h5 class=modal-title id=exampleModalLabel>搜索结果</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class="modal-body searchResults"></div></div></div></div></header><section id=main class=outer><article class="article article-type-post" itemscope itemprop=blogPost><div class=article-inner><header class=article-header><h1 class=article-title itemprop=name>finalize的意义</h1></header><div class=article-meta><a href=../../posts/finalize%E7%9A%84%E6%84%8F%E4%B9%89/ class=article-date><time datetime=2022-08-07T20:32:09.000+00:00 itemprop=datePublished>2022-08-07</time></a></div><div class=article-entry itemprop=articleBody><p>程序员都了解初始化的重要性，但是会常常忘记同样重要的清理工作，java有垃圾回收器负责回收无用对象占用的内存资源，但是也有特殊情况，你的对象获得了一块特殊的内存区域，并不是通过 new 方法，<strong>由于垃圾回收器只知道释放那些经由new分配的内存</strong>， 所以它不知道如何释放这些特殊的内存。</p><p>java 考虑到这种情况，允许在类中定义一个名为 <code>finalize()</code> 的方法。他的工作原理是这样的：一旦垃圾回收器准备释放对象占用的存储空间，将首先调用 <code>finalize()</code> 方法，并在下一次垃圾回收动作发生时，才会真正的回收对象占用的内存。就像为垃圾回收器添加一个回调方法一样。</p><p><strong>注意</strong>: 垃圾回收并不能保证一定能发生，也许你会发现，只要程序没有濒临存储空间用完的那一刻，对象占用的空间永远得不到释放，甚至程序运行结束 垃圾回收器也没有释放你创建的任何对象的存储空间，而是随着操作程序的退出，将资源全部还给操作系统，这个策略是恰当的，因为垃圾回收本身也有开销，要是不实用它，也就不用支付这部分开销了。</p><h3 id=finalize--用户何在>finalize 用户何在</h3><p>到此我们应该明白，不该将 finalize () 作为通用的清理方法，请记住重要的一点，<strong>垃圾回收应该只与内存有关</strong>。所以和垃圾回收有关的任何行为尤其是finalize 方法，<strong>他们也必须同内存及其回收有关</strong></p><p>上面说的特殊的内存区域是怎么创建出来的呢？</p><p>因为java中一切都是对象，任何区域中的内存都是依附于对象的，这样就将这部分区域限制到很少的场景。那就是可能在java中使用了类似与 C语言 malloc() 方法来分配内存。通过这种方式分配内存，只能使用 free() 方法来释放，否则就会发生内存泄露。</p><p>现在我们应该明白，不要过多的使用 finalize() 方法的道理了，因为他确实不是进行普通的清理工作的合适场所。</p><ul><li>参考资料
《Think in Java》</li></ul></div><div class=article-toc><h3></h3><nav id=TableOfContents><ul><li><ul><li><a href=#finalize--用户何在>finalize 用户何在</a></li></ul></li></ul></nav></div><footer class=article-footer><ul class=article-tag-list><li class=article-tag-list-item><a class=article-tag-list-link href=https://dccmmtop.github.io/tags/java>java</a></li></ul></footer></div><nav id=article-nav><a href=../../posts/java%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%92%8C%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6/ id=article-nav-newer class=article-nav-link-wrap><div class=article-nav-title><span>&lt;</span>&nbsp;
java中的类加载器和双亲委派机制</div></a><a href=../../posts/mysql%E4%B8%AD%E7%9A%84bufferpoll%E4%B8%8Eredolog%E7%9A%84%E4%BD%9C%E7%94%A8/ id=article-nav-older class=article-nav-link-wrap><div class=article-nav-title>MySQL中的BufferPool与RedoLog的作用&nbsp;<span>></span></div></a></nav></article></section><footer id=footer><div class=outer><div id=footer-info class=inner>&copy; 2022 dc<br>Powered by <a href=https://gohugo.io target=_blank>Hugo</a> with theme <a href=https://github.com/carsonip/hugo-theme-minos target=_blank>Minos</a></div></div><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/tomorrow-night.min.css integrity="sha256-2wL88NKUqvJi/ExflDzkzUumjUM73mcK2gBvBBeLvTk=" crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin=anonymous></script>
<script>hljs.initHighlightingOnLoad()</script><script>document.getElementById("main-nav-toggle").addEventListener("click",function(){var e=document.getElementById("header");e.classList.contains("mobile-on")?e.classList.remove("mobile-on"):e.classList.add("mobile-on")})</script></footer></div></body></html>